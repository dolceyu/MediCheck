{% load static %}
<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–û–ø–∏—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–∞—Ü—ñ—î–Ω—Ç–∞ - {{ service.name }}</title>
  <link rel="stylesheet" href="{% static 'css/survey.css' %}">
  <link rel="icon" type="image/png" href="{% static 'img/favicon.png' %}">
</head>
<body>
  <header class="main-header">
    <div class="container">
      <div class="logo">
        <img src="{% static 'img/favicon.png' %}" alt="–õ–æ–≥–æ—Ç–∏–ø">
        <span>MediCheck</span>
      </div>
      <nav class="nav-links">
        <a href="{% url 'index' %}">–ì–æ–ª–æ–≤–Ω–∞</a>
        <a href="{% url 'about' %}">–ü—Ä–æ –Ω–∞—Å</a>
      </nav>
      <div class="user-info">
        {{ patient.last_name }} {{ patient.first_name }} {{ patient.middle_name }} - –ø–∞—Ü—ñ—î–Ω—Ç
        <span class="menu-icon">‚ò∞</span>
      </div>
    </div>
  </header>

  <main class="survey-content">
    <h1>–û—Ü—ñ–Ω–∫–∞ –º–µ–¥–∏—á–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É {{ service.name }}</h1>
    <div class="rating-info">
    <strong>–ë—É–¥—å –ª–∞—Å–∫–∞, –æ—Ü—ñ–Ω—é–π—Ç–µ —á–µ—Å–Ω–æ ‚Äî –≤–∞—à–∞ –¥—É–º–∫–∞ –¥–æ–ø–æ–º–æ–∂–µ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —è–∫—ñ—Å—Ç—å —Ä–æ–±–æ—Ç–∏ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∏—Ö –º–µ–¥–∏—á–Ω–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤.</strong>
    <p>–û—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è –ø—Ä–æ–≤–æ–¥–∏—Ç—å—Å—è –∑–∞ —à–∫–∞–ª–æ—é –≤—ñ–¥ <strong>1</strong> –¥–æ <strong>5</strong>:</p>
    <ul>
      <li><strong>1</strong> ‚Äî –Ω–∞–π–Ω–∏–∂—á–∞ –æ—Ü—ñ–Ω–∫–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥—É–∂–µ –ø–æ–≥–∞–Ω–æ / —Ä—ñ–¥–∫–æ / –Ω–µ–∑—Ä—É—á–Ω–æ)</li>
      <li><strong>5</strong> ‚Äî –Ω–∞–π–≤–∏—â–∞ –æ—Ü—ñ–Ω–∫–∞ (–≤—ñ–¥–º—ñ–Ω–Ω–æ / —á–∞—Å—Ç–æ / –¥—É–∂–µ –∑—Ä—É—á–Ω–æ)</li>
    </ul>
  </div>
    <form method="post">
      {% csrf_token %}
      {% regroup questions by category as grouped_questions %}
      {% for group in grouped_questions %}
        <h2>
          {% if group.grouper == 'interface' %}–î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Ç–∞ –∑—Ä—É—á–Ω—ñ—Å—Ç—å —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É{% endif %}
          {% if group.grouper == 'mobile' %}–ú–æ–±—ñ–ª—å–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü—ñ—è{% endif %}
          {% if group.grouper == 'speed' %}–®–≤–∏–¥–∫–æ–¥—ñ—è —Ç–∞ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å{% endif %}
          {% if group.grouper == 'booking' %}–ó–∞–ø–∏—Å –Ω–∞ –ø—Ä–∏–π–æ–º{% endif %}
          {% if group.grouper == 'trust' %}–î–æ–≤—ñ—Ä–∞ —Ç–∞ –±–µ–∑–ø–µ–∫–∞{% endif %}
          {% if group.grouper == 'general' %}–ó–∞–≥–∞–ª—å–Ω–µ –≤—Ä–∞–∂–µ–Ω–Ω—è{% endif %}
        </h2>
        {% for question in group.list %}
          <div class="question">
            <p>{{ question.text }}</p>
            {% for i in "12345" %}
              <label><input type="radio" name="q{{ question.id }}" value="{{ i }}"> {{ i }}</label>
            {% endfor %}
          </div>
        {% endfor %}
      {% endfor %}

      <div class="question">
        <p>–í–∞—à –∫–æ–º–µ–Ω—Ç–∞—Ä –∞–±–æ –ø–æ–±–∞–∂–∞–Ω–Ω—è:</p>
        <textarea name="comment" rows="4" cols="50" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å —Ç—É—Ç..."></textarea>
      </div>

      <button type="submit">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
    </form>
  </main>

  <!-- üîª –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é -->
  <div class="burger-panel" id="burgerPanel">
    <div class="burger-header">
      <strong>{{ patient.last_name }} {{ patient.first_name }} {{ patient.middle_name }}</strong>
      <div>–ü–∞—Ü—ñ—î–Ω—Ç</div>
    </div>
    <div class="burger-buttons">
      <a href="{% url 'profile_patient' %}"><button>–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å</button></a>
      <a href="{% url 'patient_ratings' %}"><button class="burger-btn">–ú–æ—ó –æ—Ü—ñ–Ω–∫–∏</button></a>
      <a href="{% url 'support' %}"><button>–°–ª—É–∂–±–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏</button></a>
    </div>
    <div class="burger-footer">
      <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit" class="burger-btn">–í–∏–π—Ç–∏</button>
      </form>
    </div>
  </div>

  <script>
    const menuIcon = document.querySelector(".menu-icon");
    const burgerPanel = document.getElementById("burgerPanel");

    if (menuIcon && burgerPanel) {
      menuIcon.addEventListener("click", () => {
        burgerPanel.classList.toggle("open");
      });

      document.addEventListener("click", (e) => {
        if (!burgerPanel.contains(e.target) && !menuIcon.contains(e.target)) {
          burgerPanel.classList.remove("open");
        }
      });
    }
  </script>
</body>
</html>
